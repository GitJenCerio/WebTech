<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type="text/css" rel="stylesheet" href="resources/sheet.css" >
<style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .s16{border-bottom:1px SOLID #b7b7b7;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:10pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s20{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#1b2a5e;text-align:left;color:#000000;font-family:Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s3{border-bottom:1px SOLID #cccccc;background-color:#1b2a5e;text-align:left;font-weight:bold;color:#ffffff;font-family:docs-Nunito,Arial;font-size:12pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s11{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #b7b7b7;background-color:#1b2a5e;text-align:left;font-weight:bold;color:#ffffff;font-family:docs-Nunito,Arial;font-size:12pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s17{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s6{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#efefef;text-align:left;font-weight:bold;color:#000000;font-family:docs-Nunito,Arial;font-size:12pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s4{border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s18{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:10pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s12{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:center;font-weight:bold;color:#000000;font-family:docs-Nunito,Arial;font-size:11pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s1{background-color:#1b2a5e;text-align:left;color:#000000;font-family:Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s23{border-bottom:1px SOLID #b7b7b7;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:10pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s24{border-bottom:1px SOLID #cccccc;background-color:#ffffff;text-align:center;font-weight:bold;color:#000000;font-family:docs-Nunito,Arial;font-size:11pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s13{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:center;color:#000000;font-family:docs-Nunito,Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s5{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s22{border-bottom:1px SOLID #b7b7b7;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s21{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s9{border-bottom:1px SOLID #b7b7b7;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s14{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:10pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s0{background-color:#ffffff;text-align:left;color:#000000;font-family:Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s2{background-color:#1b2a5e;text-align:left;font-weight:bold;color:#ffffff;font-family:docs-Nunito,Arial;font-size:15pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s25{border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:Arial;font-size:10pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s10{border-right:1px SOLID #b7b7b7;background-color:#ffffff;text-align:left;color:#000000;font-family:Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s15{border-bottom:1px SOLID #b7b7b7;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:center;color:#000000;font-family:docs-Nunito,Arial;font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s8{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#efefef;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:11pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s7{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#efefef;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s19{border-bottom:1px SOLID #cccccc;border-right:1px SOLID #cccccc;background-color:#ffffff;text-align:left;color:#000000;font-family:docs-Nunito,Arial;font-size:10pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}</style><div class="ritz grid-container" dir="ltr"><table class="waffle no-grid" cellspacing="0" cellpadding="0"><thead><tr><th class="row-header freezebar-origin-ltr"></th><th id="1898205363C0" style="width:61px;" class="column-headers-background">A</th><th id="1898205363C1" style="width:65px;" class="column-headers-background">B</th><th id="1898205363C2" style="width:122px;" class="column-headers-background">C</th><th id="1898205363C3" style="width:105px;" class="column-headers-background">D</th><th id="1898205363C4" style="width:105px;" class="column-headers-background">E</th><th id="1898205363C5" style="width:102px;" class="column-headers-background">F</th><th id="1898205363C6" style="width:102px;" class="column-headers-background">G</th><th id="1898205363C7" style="width:140px;" class="column-headers-background">H</th><th id="1898205363C8" style="width:234px;" class="column-headers-background">I</th><th id="1898205363C9" style="width:234px;" class="column-headers-background">J</th></tr></thead><tbody><tr style="height: 210px"><th id="1898205363R0" style="height: 210px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 210px">1</div></th><td class="s0"></td><td class="s0" colspan="9"></td></tr><tr style="height: 37px"><th id="1898205363R1" style="height: 37px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 37px">2</div></th><td class="s1"></td><td class="s2" colspan="9">MO-IT149 Web Technology Application</td></tr><tr style="height: 37px"><th id="1898205363R2" style="height: 37px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 37px">3</div></th><td class="s1"></td><td class="s3" colspan="9">Integration Plan: File Storage, Authentication, and Access Control</td></tr><tr style="height: 27px"><th id="1898205363R3" style="height: 27px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 27px">4</div></th><td class="s4"></td><td class="s5" colspan="9"></td></tr><tr style="height: 27px"><th id="1898205363R4" style="height: 27px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 27px">5</div></th><td class="s4"></td><td class="s6" colspan="9">Instructions</td></tr><tr style="height: 46px"><th id="1898205363R5" style="height: 46px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 46px">6</div></th><td class="s4"></td><td class="s7" colspan="9">Complete each section of the worksheet, tailoring the information to your specific project and assigned responsibilities. Sample answers are provided in <span style="font-weight:bold;color:#ff0000;">red</span> for guidance; replace these with your own responses in <span style="font-weight:bold;">black</span>.</td></tr><tr style="height: 27px"><th id="1898205363R6" style="height: 27px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 27px">7</div></th><td class="s4"></td><td class="s8" colspan="9">Work collaboratively to align your answers and finalize the plan.</td></tr><tr style="height: 27px"><th id="1898205363R7" style="height: 27px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 27px">8</div></th><td class="s4"></td><td class="s8" colspan="9">Use this worksheet as a guide during implementation and testing phases.</td></tr><tr style="height: 13px"><th id="1898205363R8" style="height: 13px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 13px">9</div></th><td class="s4"></td><td class="s9" colspan="9"></td></tr><tr style="height: 35px"><th id="1898205363R9" style="height: 35px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 35px">10</div></th><td class="s10"></td><td class="s11" colspan="9">Section 1: Project Overview</td></tr><tr style="height: 13px"><th id="1898205363R10" style="height: 13px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 13px">11</div></th><td class="s4"></td><td class="s5" colspan="9"></td></tr><tr style="height: 65px"><th id="1898205363R11" style="height: 65px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 65px">12</div></th><td class="s4"></td><td class="s12" colspan="3">Feature</td><td class="s12" colspan="3">Current State</td><td class="s12" colspan="3">Planned Integration</td></tr><tr style="height: 65px"><th id="1898205363R12" style="height: 65px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 65px">13</div></th><td class="s4"></td><td class="s13" colspan="3">File Storage</td><td class="s14" dir="ltr" colspan="3">No file storage system implemented</td><td class="s14" dir="ltr" colspan="3">Use Cloudinary cloud storage to store payment proof images uploaded by admin when confirming client reservations AND nail inspiration/current state photos uploaded by clients during booking creation</td></tr><tr style="height: 65px"><th id="1898205363R13" style="height: 65px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 65px">14</div></th><td class="s4"></td><td class="s13" colspan="3">File Upload/Retrieval</td><td class="s14" dir="ltr" colspan="3">No file upload functionality exists</td><td class="s14" dir="ltr" colspan="3">Implement validation to support image formats (JPEG, PNG, WebP, HEIC), limit file size (5MB for admin, 10MB for clients), and allow secure retrieval and deletion of images with automatic optimization</td></tr><tr style="height: 65px"><th id="1898205363R14" style="height: 65px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 65px">15</div></th><td class="s4"></td><td class="s13" colspan="3">User Authentication</td><td class="s14" dir="ltr" colspan="3">Basic NextAuth.js authentication with Credentials provider only (email/password), JWT tokens (30-day expiration), password hashing with bcrypt</td><td class="s14" dir="ltr" colspan="3">Add Google OAuth as alternative login method, enhance authentication with HTTP-only cookies (currently uses default), reduce token expiration to 24 hours for better security, add lastLogin tracking, and implement account status checking (isActive field)</td></tr><tr style="height: 65px"><th id="1898205363R15" style="height: 65px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 65px">16</div></th><td class="s4"></td><td class="s13" colspan="3">Authentication Tokens</td><td class="s14" dir="ltr" colspan="3">JWT tokens exist but inconsistently validated across routes; some API routes check authentication manually (like /api/users) while others don&#39;t (like /api/bookings)</td><td class="s14" dir="ltr" colspan="3">Implement centralized middleware for automatic token validation on ALL admin routes, ensure consistent authentication checking across all protected endpoints, reduce token expiration from 30 days to 24 hours</td></tr><tr style="height: 65px"><th id="1898205363R16" style="height: 65px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 65px">17</div></th><td class="s4"></td><td class="s13" colspan="3">Middleware Validation</td><td class="s14" dir="ltr" colspan="3">No middleware.ts file exists; auth checking done manually in individual API routes (inconsistent coverage)</td><td class="s14" dir="ltr" colspan="3">Create middleware.ts at root level to automatically protect all /admin/* and /api/* routes (except auth routes), validate JWT tokens, check user session and account status, add security headers to all responses</td></tr><tr style="height: 65px"><th id="1898205363R17" style="height: 65px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 65px">18</div></th><td class="s4"></td><td class="s15" colspan="3">Role-Based Access Control (RBAC)</td><td class="s16" dir="ltr" colspan="3">Basic 2-role system exists (&#39;admin&#39; and &#39;staff&#39; in User model) but no permissions enforcement; all authenticated users have same access regardless of role</td><td class="s16" dir="ltr" colspan="3">Expand to 4-role system (SUPER_ADMIN, ADMIN, MANAGER, STAFF), create comprehensive permissions matrix, implement role checking middleware, enforce role-based restrictions on API routes and UI components, add audit logging for authorization failures</td></tr><tr style="height: 35px"><th id="1898205363R18" style="height: 35px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 35px">19</div></th><td class="s10"></td><td class="s11" colspan="9">Section 2: Integration Details</td></tr><tr style="height: 13px"><th id="1898205363R19" style="height: 13px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 13px">20</div></th><td class="s4"></td><td class="s5" colspan="9"></td></tr><tr style="height: 29px"><th id="1898205363R20" style="height: 29px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 29px">21</div></th><td class="s4"></td><td class="s12" colspan="9">Part I: File Storage and Retrieval</td></tr><tr style="height: 32px"><th id="1898205363R21" style="height: 32px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 32px">22</div></th><td class="s4"></td><td class="s17" colspan="4">Which provider will you use?</td><td class="s5" colspan="5"></td></tr><tr style="height: 341px"><th id="1898205363R22" style="height: 341px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 341px">23</div></th><td class="s4"></td><td class="s17" colspan="4">What types of files will you store?</td><td class="s18" dir="ltr" colspan="5"><span style="font-weight:bold;">Payment proof images (Admin uploads</span>)<br><br>-Screenshots of GCash transactions<br>-Bank transfer receipts<br>-Digital payment confirmations<br>-Size: ~500KB average per file<br><br><span style="font-weight:bold;">Nail inspiration photos (Client uploads)</span><br><br>-Reference designs clients want<br>-Photos from social media<br>-Custom design ideas<br>-Size: ~2MB average per file<br><br><span style="font-weight:bold;">Current nail state photos (Client uploads)</span><br><br>-Photos of client&#39;s current nails<br>-Used by nail techs to assess condition<br>-Plan appropriate services<br>-Size: ~2MB average per file</td></tr><tr style="height: 446px"><th id="1898205363R23" style="height: 446px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 446px">24</div></th><td class="s4"></td><td class="s17" colspan="4">How will files be structured?</td><td class="s19" dir="ltr" colspan="5">cloudinary_root/<br>├── payment_proofs/<br>│   ├── booking_GN-20260205001_proof.jpg<br>│   ├── booking_GN-20260205002_proof.jpg<br>│   └── booking_GN-20260205003_proof.jpg<br>├── nail_inspo/<br>│   ├── booking_GN-20260205001_inspo_1.jpg<br>│   ├── booking_GN-20260205001_inspo_2.jpg<br>│   └── booking_GN-20260205001_inspo_3.jpg<br>└── nail_current/<br>    ├── booking_GN-20260205001_current_1.jpg<br>    ├── booking_GN-20260205001_current_2.jpg<br>    └── booking_GN-20260205001_current_3.jpg<br><span style="font-weight:bold;"><br>Naming Convention:</span><br><br>Payment proofs: booking_{BOOKING_NUMBER}_proof.{extension}<br>Inspiration: booking_{BOOKING_NUMBER}_inspo_{INDEX}.{extension}<br>Current state: booking_{BOOKING_NUMBER}_current_{INDEX}.{extension}<br><br><span style="font-weight:bold;">File Retention:</span><br><br>Payment proofs: Retained indefinitely (legal/accounting requirement)<br>Client nail photos: Auto-deleted 30 days after booking completion<br>Old payment proofs: Automatically deleted when new one uploaded for same booking</td></tr><tr style="height: 689px"><th id="1898205363R24" style="height: 689px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 689px">25</div></th><td class="s4"></td><td class="s17" colspan="4">Routes to implement</td><td class="s19" dir="ltr" colspan="5"><span style="font-weight:bold;">Admin Upload Routes:</span><br><br>POST /api/integrations/storage/upload-payment<br>- Purpose: Upload payment proof image<br>- Authentication: Required (JWT)<br>- Authorization: ADMIN, SUPER_ADMIN roles only<br>- Body: multipart/form-data (file, bookingId)<br>- Response: { url, publicId, width, height, format, size, message }<br><br>DELETE /api/integrations/storage/delete<br>- Purpose: Delete image from Cloudinary<br>- Authentication: Required (JWT)<br>- Authorization: ADMIN, SUPER_ADMIN roles only<br>- Body: { publicId }<br>- Response: { success, message }<br><br><span style="font-weight:bold;">Client Upload Routes:</span><br><br>POST /api/integrations/storage/generate-signature<br>- Purpose: Generate signed upload URL for secure client uploads<br>- Body: { bookingId, photoType: &#39;inspiration&#39; | &#39;currentState&#39; }<br>- Validation: Booking exists, photo limit not exceeded (max 3 per type)<br>- Response: { <br>    signature, timestamp, cloudName, apiKey, <br>    uploadPreset, folder, expiresIn: 900 <br>  }<br><br>POST /api/bookings/[id]/add-photo<br>- Purpose: Save uploaded photo URL to booking record<br>- Body: { photoType, url, publicId, thumbnailUrl }<br>- Response: { success, photoId, message }<br><br>DELETE /api/bookings/[id]/remove-photo<br>- Purpose: Remove photo from booking and Cloudinary<br>- Body: { photoId }<br>- Response: { success, message }<br><span style="font-weight:bold;"><br>Retrieval:</span><br><br>Payment proof URLs stored in booking.payment.paymentProofUrl<br>Client photos stored in booking.clientPhotos.inspiration[] and booking.clientPhotos.currentState[]<br>All image URLs retrieved via GET /api/bookings/:id</td></tr><tr style="height: 483px"><th id="1898205363R25" style="height: 483px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 483px">26</div></th><td class="s4"></td><td class="s17" colspan="4">Validation rules</td><td class="s19" dir="ltr" colspan="5"><span style="font-weight:bold;">Admin Payment Proof Uploads:</span><br><br>- File type: JPEG, PNG, WebP only<br>- File size: Maximum 5MB per image<br>- Booking validation: Must include valid booking ID that exists in database<br>- Authentication: JWT token required (admin roles only)<br>- Auto-optimization: Resize to max 1500px width, compress quality 80%<br>- Unique filename: Generate UUID to prevent collisions<br>- Old proof cleanup: Delete previous payment proof when new one uploaded<br><br><span style="font-weight:bold;">Client Nail Photo Uploads:</span><br><br>- File type: JPEG, PNG, WebP, HEIC (mobile camera support)<br>- File size: Maximum 10MB per image (high-res phone cameras)<br>- Upload limit: Maximum 3 inspiration photos + 3 current state photos per booking<br>- Security: Signed upload URLs with 15-minute expiration<br>- Auto-optimization: Resize to max 2000px width, compress quality 75%<br>- Thumbnail generation: Automatically create 300x300px thumbnails for gallery view<br>- Validation: Both client-side (immediate feedback) and server-side (security)<br>- Rate limiting: Maximum 10 signature requests per hour per booking<br><br><span style="font-weight:bold;">Both Upload Types:</span><br><br>- Content-Type validation<br>- File extension validation<br>- MIME type verification<br>- Error handling with user-friendly messages<br>- Upload progress tracking</td></tr><tr style="height: 13px"><th id="1898205363R26" style="height: 13px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 13px">27</div></th><td class="s4"></td><td class="s20" colspan="9"></td></tr><tr style="height: 32px"><th id="1898205363R27" style="height: 32px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 32px">28</div></th><td class="s4"></td><td class="s12" colspan="9">Part II: User Authentication (Google OAuth)</td></tr><tr style="height: 563px"><th id="1898205363R28" style="height: 563px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 563px">29</div></th><td class="s4"></td><td class="s17" colspan="4">How will users log in?</td><td class="s19" dir="ltr" colspan="5"><span style="font-weight:bold;">Planned Authentication Methods:</span> NextAuth.js with dual authentication options:<br><br>Credentials Provider: Email and password  (Already implemented)<br>Google OAuth Provider: Sign in with Google  - Will restrict to pre-approved users only<br><br><span style="font-weight:bold;">Login Flow:</span><br><br>Admin enters email and password on login page (/admin/login)<br>Frontend validates inputs (email format, password length)<br>POST request sent to /api/auth/callback/credentials<br>NextAuth.js calls authorize function in auth configuration<br>Backend queries User model in MongoDB<br>Password verified using bcrypt comparison (10 salt rounds)<br>If valid:<br>JWT token generated with user data (id, email, name, role)<br>Token stored in HTTP-only cookie (prevents XSS attacks)<br>User redirected to /admin/dashboard<br>If invalid:<br>Error message displayed: &quot;Invalid email or password&quot;<br>Failed attempt logged for security monitoring<br><br><span style="font-weight:bold;">Password Security:</span><br><br>Passwords hashed using bcrypt with 10 salt rounds<br>Minimum 8 characters required<br>Stored securely in MongoDB (never plain text)<br><br><span style="font-weight:bold;">Session Management:</span><br><br>JWT tokens stored in HTTP-only cookies<br>Token expires after 24 hours<br>Session validated on every protected route<br>User can log out to invalidate token immediately</td></tr><tr style="height: 568px"><th id="1898205363R29" style="height: 568px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 568px">30</div></th><td class="s4"></td><td class="s17" colspan="4">What user data will you retrieve?</td><td class="s18" dir="ltr" colspan="5"><span style="font-weight:bold;">Currently Retrieved (Existing Implementation):</span><br><br>// From session<br>{<br>  id: user._id.toString(),<br>  email: user.email,<br>  name: user.name || user.email.split(&#39;@&#39;)[0],<br>  image: user.image  // From Google OAuth<br>}<br><br><span style="font-weight:bold;">Current User Model Fields:</span><br><br>- email (unique, indexed)<br>- password (hashed with bcrypt, select: false)<br>- name<br>- image (Google OAuth profile picture)<br>- emailVerified (boolean)<br>- role (&#39;admin&#39; | &#39;staff&#39;)<br>- assignedNailTechId (for staff members)<br>- status (&#39;active&#39; | &#39;inactive&#39;)<br>- createdAt, updatedAt<br><br><span style="font-weight:bold;">Planned Additions to User Model:</span><br><br>- lastLogin timestamp (not tracked currently)<br>- Expand roles to: SUPER_ADMIN, ADMIN, MANAGER, STAFF<br>- isActive field (currently using &#39;status&#39;, will rename for consistency)<br><br><span style="font-weight:bold;">Privacy &amp; Security:</span><br><br>Password NEVER included in session or response<br>Sensitive data not stored in JWT payload<br>User data only accessible to authenticated users<br>Role information used for access control</td></tr><tr style="height: 854px"><th id="1898205363R30" style="height: 854px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 854px">31</div></th><td class="s4"></td><td class="s17" colspan="4">Token management plan</td><td class="s19" dir="ltr" colspan="5"><span style="font-weight:bold;">Current Token Implementation:</span><br><br>-JWT tokens issued by NextAuth.js upon successful authentication<br>-Signed with NEXTAUTH_SECRET (stored in .env)<br>-Session strategy: &#39;jwt&#39;<br>-Current expiration: 30 days (too long for security)<br>-Include user data: id (token.sub), email, name, image<br> Missing in token: role, isActive status<br><br><span style="font-weight:bold;">Current Token Storage:</span><br><br>-NextAuth.js default cookie storage<br>-Not explicitly configured as HTTP-only (relying on NextAuth defaults)<br>Cookie name: next-auth.session-token<br>-Secure flag: depends on NextAuth defaults<br><br><span style="font-weight:bold;">Planned Improvements:</span><br><br> Reduce expiration from 30 days to 24 hours<br> Explicitly configure HTTP-only cookies<br> Add role and isActive to JWT payload<br> Add custom cookie configuration for better security<br><br><span style="font-weight:bold;">Token Validation:</span><br><br>Middleware checks cookie on every protected route<br>NextAuth.js automatically validates signature<br>Checks expiration timestamp<br>Verifies user still exists and isActive=true<br>Invalid/expired tokens trigger redirect to login<br><br><span style="font-weight:bold;">Token Refresh:</span><br><br>Current: User must re-authenticate after 24 hours<br>Future enhancement: Refresh token rotation for extended sessions<br>Sliding session (extends on activity) - optional implementation<br><br><span style="font-weight:bold;">Token Invalidation:<br></span><br>User logout: Token removed from cookie<br>Password change: All tokens invalidated<br>Account deactivation: isActive=false blocks access<br>Role change: Takes effect on next token validation<br><br><span style="font-weight:bold;">Security Measures:</span><br><br>HTTPS enforced in production<br>CSRF protection via NextAuth.js built-in tokens<br>Rate limiting on login endpoint (5 attempts/minute per IP)<br>Failed login attempts logged<br>Suspicious activity monitoring</td></tr><tr style="height: 1014px"><th id="1898205363R31" style="height: 1014px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 1014px">32</div></th><td class="s4"></td><td class="s17" colspan="4">Routes to implement</td><td class="s19" dir="ltr" colspan="5"><span style="font-weight:bold;">Authentication Routes (NextAuth.js):</span><br><br>POST /api/auth/callback/credentials<br>- Purpose: Handle login (email + password)<br>- Body: { email, password }<br>- Response: Sets HTTP-only cookie, returns user session<br>- Rate limit: 5 requests/minute per IP<br><br>GET /api/auth/session<br>- Purpose: Get current authenticated user session<br>- Authentication: Required (checks cookie)<br>- Response: { user: { id, email, name, role, isActive } }<br><br>POST /api/auth/signout<br>- Purpose: Logout user<br>- Authentication: Required<br>- Action: Removes session cookie<br>- Response: { success: true }<br><br>GET /api/auth/csrf<br>- Purpose: Get CSRF token for form submissions<br>- Response: { csrfToken }<br><br><span style="font-weight:bold;">Password Management Routes:</span><br><br>POST /api/auth/forgot-password<br>- Purpose: Request password reset email<br>- Body: { email }<br>- Action: Generate reset token, send email via Resend<br>- Rate limit: 3 requests/hour per email<br>- Response: { message: &#39;Password reset link sent&#39; }<br><br>POST /api/auth/reset-password<br>- Purpose: Reset password with token<br>- Body: { token, newPassword }<br>- Validation: Token valid and not expired (&lt;1 hour old)<br>- Action: Hash new password, update database, invalidate token<br>- Response: { success: true, message: &#39;Password updated&#39; }<br><br>POST /api/auth/change-password<br>- Purpose: Change password (authenticated user)<br>- Authentication: Required (JWT)<br>- Body: { currentPassword, newPassword }<br>- Validation: Verify current password before updating<br>- Response: { success: true, message: &#39;Password changed&#39; }<br><br><span style="font-weight:bold;">Session Management Routes:</span><br><br>GET /api/auth/me<br>- Purpose: Get current user details<br>- Authentication: Required (JWT)<br>- Response: { <br>    id, email, name, role, isActive, lastLogin, createdAt <br>  }<br><br>PUT /api/auth/profile<br>- Purpose: Update user profile (name, email)<br>- Authentication: Required (JWT)<br>- Body: { name, email }<br>- Response: { user: { updated fields }, message }</td></tr><tr style="height: 13px"><th id="1898205363R32" style="height: 13px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 13px">33</div></th><td class="s4"></td><td class="s20" colspan="9"></td></tr><tr style="height: 32px"><th id="1898205363R33" style="height: 32px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 32px">34</div></th><td class="s4"></td><td class="s12" colspan="9">Part III: Middleware Validation</td></tr><tr style="height: 130px"><th id="1898205363R34" style="height: 130px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 130px">35</div></th><td class="s4"></td><td class="s21" colspan="4">Middleware function details</td><td class="s18" dir="ltr" colspan="5">The middleware will extract JWT tokens from HTTP-only cookies, validate the token signature using NextAuth.js built-in validation, and check the token expiration timestamp. It will also verify that the user account is active by checking the isActive status from the database. For protected routes, the middleware will extract user information (id, email, role) from the token and attach it to the request object for use by API handlers. If validation fails, appropriate error responses will be returned. Additionally, the middleware will implement rate limiting to prevent brute force attacks (5 login attempts per minute) and add security headers to all responses (X-Content-Type-Options, X-Frame-Options, X-XSS-Protection).</td></tr><tr style="height: 132px"><th id="1898205363R35" style="height: 132px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 132px">36</div></th><td class="s4"></td><td class="s21" colspan="4">Routes requiring middleware</td><td class="s18" dir="ltr" colspan="5">All routes under /admin/* (dashboard, bookings management, clients, nail-techs, quotations, reports, settings) require authentication middleware. For API routes, the following endpoints require middleware validation: /api/availability/* (admin manages time slots), /api/bookings/:id PUT/DELETE (edit/delete bookings - admin only), /api/bookings/:id/confirm-payment (admin confirms bookings), /api/clients/* (all client management routes), /api/nail-techs/* (all nail tech management routes), /api/quotations/* (quotation creation and management), /api/dashboard/* (dashboard statistics and analytics), /api/reports/* (revenue and analytics reports), and /api/integrations/storage/upload-payment (payment proof uploads by admin). Public routes that do not require middleware include /api/auth/login, /api/auth/forgot-password, /api/bookings POST (client-facing booking creation), /api/availability GET (view available slots), and /api/integrations/storage/generate-signature (for client photo uploads with signed URLs).<br><br></td></tr><tr style="height: 298px"><th id="1898205363R36" style="height: 298px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 298px">37</div></th><td class="s4"></td><td class="s21" colspan="4">Error handling plan</td><td class="s18" dir="ltr" colspan="5">-If the authentication token is missing from the request, the middleware will return a 401 Unauthorized status with the message &quot;Authentication required. Please log in.&quot; and redirect the user to the login page. <br><br>-If the token is invalid or has been tampered with, a 401 Unauthorized response will be returned with the message &quot;Invalid session. Please log in again.&quot; and the session cookie will be cleared. <br><br>-For expired tokens, the system will return 401 Unauthorized with &quot;Session expired. Please log in again.&quot; and redirect to the login page.<br><br>-If a user&#39;s account has been deactivated (isActive: false), a 403 Forbidden response will be returned with the message &quot;Account has been deactivated. Contact administrator.&quot; <br><br>-For authorization errors, if a user lacks the required role for a specific action, the system will return 403 Forbidden with &quot;You do not have permission to perform this action. Required role: [ROLE_NAME]&quot; and log the unauthorized access attempt with user ID, attempted action, and timestamp for security auditing.<br> <br>-All failed authentication attempts will be logged for security monitoring purposes.</td></tr><tr style="height: 13px"><th id="1898205363R37" style="height: 13px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 13px">38</div></th><td class="s4"></td><td class="s20" colspan="9"></td></tr><tr style="height: 32px"><th id="1898205363R38" style="height: 32px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 32px">39</div></th><td class="s4"></td><td class="s12" colspan="9">Part IV: Role-Based Access Control (RBAC)</td></tr><tr style="height: 116px"><th id="1898205363R39" style="height: 116px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 116px">40</div></th><td class="s4"></td><td class="s17" colspan="4">User roles</td><td class="s18" dir="ltr" colspan="5"><span style="font-weight:bold;">1. SUPER_ADMIN</span><br><span style="font-weight:bold;">2. ADMIN</span><br><span style="font-weight:bold;">3. MANAGER</span><br><span style="font-weight:bold;">4. STAFF</span><br></td></tr><tr style="height: 883px"><th id="1898205363R40" style="height: 883px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 883px">41</div></th><td class="s4"></td><td class="s17" colspan="4">Role-based permissions</td><td class="s19" dir="ltr" colspan="5"><span style="font-weight:bold;">1. SUPER_ADMIN</span><br><br>Full platform access including system administration<br>Can manage all admin users (create, edit, delete)<br>Access to system settings and configuration<br>View audit logs and system activity<br>Perform all actions without restriction<br>Default first user created during setup<br><br><span style="font-weight:bold;">2. ADMIN</span><br><br>Manage time slot availability (create slots for booking)<br>View and manage bookings created by clients<br>Edit, cancel, and delete bookings<br>Confirm payments and upload payment proofs<br>Mark bookings as completed or no-show<br>Manage clients: create, edit (but not delete)<br>Manage nail techs: create, edit, update commission rates<br>Create and manage quotations/invoices<br>Generate and export reports<br>View dashboard statistics<br>Cannot manage other admin users<br>Cannot delete clients<br><br>Note: Clients create their own bookings from available slots<br><br><span style="font-weight:bold;">3. MANAGER</span><br><br>Read-only access to bookings and clients<br>View all booking details and history<br>View client information and booking history<br>View reports and analytics<br>Search and filter data<br>Export reports<br>Cannot create, edit, or delete any records<br>Good for owners/managers who need visibility but not operational control<br><br><span style="font-weight:bold;">4. STAFF</span><br><br>Basic access for frontline employees<br>Can view booking details<br>Can update booking status (mark as completed, no-show)<br>Can view client information<br>Can assist clients with booking if needed<br>Cannot delete bookings<br>Cannot access reports<br>Cannot confirm payments<br>Cannot manage clients or nail techs<br>Cannot manage availability slots<br><br><span style="font-weight:bold;">Note: Most bookings are created by clients directly, not staff<br></span><br>Role Hierarchy:<br><br>SUPER_ADMIN (Level 4) - Full access<br>    ↓<br>ADMIN (Level 3) - Operational management<br>    ↓<br>MANAGER (Level 2) - Read-only oversight<br>    ↓<br>STAFF (Level 1) - Basic operations</td></tr><tr style="height: 1226px"><th id="1898205363R41" style="height: 1226px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 1226px">42</div></th><td class="s4"></td><td class="s17" colspan="4">Routes requiring role-based restrictions</td><td class="s19" dir="ltr" colspan="5"><span style="font-weight:bold;">SUPER_ADMIN Only Routes:</span><br><br>// User Management<br>GET    /api/admin/users              // List all admin users<br>POST   /api/admin/users              // Create new admin user<br>PUT    /api/admin/users/:id          // Edit user (including role change)<br>DELETE /api/admin/users/:id          // Delete admin user<br><br>// System Settings<br>GET    /api/admin/settings           // View system settings<br>PUT    /api/admin/settings           // Update system settings<br><br>// Client Deletion<br>DELETE /api/clients/:id              // Permanently delete client<br><br>// System Jobs<br>POST   /api/admin/jobs/payment-reminder     // Trigger payment reminder job<br>POST   /api/admin/jobs/appointment-reminder // Trigger appointment reminder<br>POST   /api/admin/jobs/auto-cancel         // Trigger auto-cancel job<br>POST   /api/admin/jobs/cleanup-photos      // Trigger photo cleanup<br><br>// Audit Logs<br>GET    /api/admin/audit-logs         // View audit logs<br><br><span style="font-weight:bold;">ADMIN and SUPER_ADMIN Routes:</span><br><br>// Booking Management<br>PUT    /api/bookings/:id             // Edit booking details<br>DELETE /api/bookings/:id             // Delete/cancel booking<br>POST   /api/bookings/:id/confirm-payment  // Confirm payment<br><br>// Client Management<br>POST   /api/clients                  // Create new client<br>PUT    /api/clients/:id              // Edit client<br><br>// Nail Tech Management<br>POST   /api/nail-techs               // Create nail tech<br>PUT    /api/nail-techs/:id           // Edit nail tech (including commission)<br><br>// Quotations<br>POST   /api/quotations               // Create quotation<br><br>// File Uploads<br>POST   /api/integrations/storage/upload-payment  // Upload payment proof<br>DELETE /api/integrations/storage/delete          // Delete images<br><br><span style="font-weight:bold;">MANAGER, ADMIN, and SUPER_ADMIN Routes:</span><br><br>// Reports<br>GET    /api/reports/revenue          // Revenue reports<br>GET    /api/reports/bookings         // Booking statistics<br>GET    /api/reports/clients          // Client analytics<br>POST   /api/reports/export           // Export reports<br><br>// Nail Tech Stats<br>GET    /api/nail-techs/:id/stats     // View nail tech earnings<br>STAFF and Above Routes:<br><br>// Basic Booking Operations<br>POST   /api/bookings                 // Create booking<br>POST   /api/bookings/:id/complete    // Mark as completed<br>POST   /api/bookings/:id/no-show     // Mark as no-show<br><br>// View Access<br>GET    /api/bookings                 // List bookings<br>GET    /api/bookings/:id             // View booking details<br>GET    /api/clients                  // List clients<br>GET    /api/clients/:id              // View client details<br>GET    /api/nail-techs               // List nail techs (for assignment)<br>GET    /api/dashboard/stats          // Dashboard statistics<br><span style="font-weight:bold;"><br>Public Routes (No Role Required):</span><br><br>POST   /api/auth/callback/credentials     // Login<br>POST   /api/integrations/storage/generate-signature  // Client uploads</td></tr><tr style="height: 194px"><th id="1898205363R42" style="height: 194px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 194px">43</div></th><td class="s4"></td><td class="s22" colspan="4">Error handling plan</td><td class="s23" dir="ltr" colspan="5"><br>Token missing  &gt; 401 Unauthorized  &gt; &quot;Authentication required. Please log in.&quot; &gt;  Redirect to login page<br>Token invalid &gt; 401 Unauthorized &gt;&quot;Invalid session. Please log in again.&quot;&gt; Clear cookie, redirect to login<br>Token expired &gt; 401 Unauthorized &gt; &quot;Session expired. Please log in again.&quot;&gt; Clear cookie, redirect to login<br>Account inactive &gt; 403 Forbidden &gt; &quot;Account has been deactivated. Contact administrator.&quot; &gt; Show support contact information<br>Insufficient role &gt;  403 Forbidden &gt; &quot;You do not have permission to perform this action.&quot; &gt; Show error message, log attempt<br><br>All failed authentication and authorization attempts will be logged with user ID, attempted action, and timestamp for security monitoring and auditing purposes.</td></tr><tr style="height: 34px"><th id="1898205363R43" style="height: 34px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 34px">44</div></th><td class="s10"></td><td class="s11" colspan="9">Section 3: Testing Plan</td></tr><tr style="height: 32px"><th id="1898205363R44" style="height: 32px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 32px">45</div></th><td class="s4"></td><td class="s24" colspan="3">Feature</td><td class="s12" colspan="4">Testing Method</td><td class="s12" colspan="2">Expected Results</td></tr><tr style="height: 212px"><th id="1898205363R45" style="height: 212px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 212px">46</div></th><td class="s25"></td><td class="s17" dir="ltr" colspan="3">File Upload (Admin Side)</td><td class="s18" dir="ltr" colspan="4">Method 1: Postman API Testing<br>1. POST to /api/integrations/storage/upload-payment with multipart form-data (file + bookingId)<br>2. Upload JPEG image (3MB)<br>3. GET /api/bookings/:id to retrieve booking<br><br>Method 2: Frontend Testing<br>1. Login as ADMIN<br>2. Navigate to booking detail<br>3. Click &quot;Confirm Payment&quot;<br>4. Upload payment proof image<br>5. Submit confirmation</td><td class="s18" dir="ltr" colspan="2"><br>-Image uploads to Cloudinary successfully<br>-Response includes: url, publicId, width, height, format<br>-URL saved in booking.payment.paymentProofUrl<br>-Image accessible via returned URL<br>-Image optimized (max 1500px width)<br>-Old payment proof deleted automatically<br>-File size validation: Reject 7MB file with 400 error<br>-File type validation: Reject .txt file with 400 error<br>-Booking status changes to CONFIRMED</td></tr><tr style="height: 212px"><th id="1898205363R46" style="height: 212px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 212px">47</div></th><td class="s25"></td><td class="s17" dir="ltr" colspan="3">File Upload (Client Side)</td><td class="s18" dir="ltr" colspan="4">Method 1: Client Flow Simulation<br>1. POST to /api/integrations/storage/generate-signature with {bookingId, photoType: &quot;inspiration&quot;}<br>2. Upload image directly to Cloudinary using signature<br>3. POST to /api/bookings/:id/add-photo with returned URL<br><br>Method 2: Upload Limit Testing<br>1. Upload 3 inspiration photos<br>2. Attempt to upload 4th photo<br>3. Upload 3 current state photos</td><td class="s18" dir="ltr" colspan="2"><br>-Signature generated with 15-minute expiration<br>-Direct upload to Cloudinary succeeds<br>-Photo saved in booking.clientPhotos array<br>-Thumbnail generated (300x300px)<br>-4th photo upload rejected with &quot;Maximum 3 photos allowed&quot;<br>-Can upload up to 6 total photos (3+3)<br>-10MB image uploads successfully<br>-11MB image rejected with size error</td></tr><tr style="height: 336px"><th id="1898205363R47" style="height: 336px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 336px">48</div></th><td class="s25"></td><td class="s17" colspan="3">User Authentication</td><td class="s18" dir="ltr" colspan="4">Method 1: Valid Login<br>1. POST to /api/auth/callback/credentials<br>2. Body: {email: &quot;admin@nails.com&quot;, password: &quot;correct_password&quot;}<br>3. Check response cookies<br><br>Method 2: Invalid Login<br>1. POST with wrong password<br>2. POST with non-existent email<br><br>Method 3: Session Persistence<br>1. Login successfully<br>2. Close browser<br>3. Reopen and visit /admin/dashboard<br><br>Method 4: Token Expiration<br>1. Login and wait 24 hours<br>2. Attempt to access protected route</td><td class="s18" dir="ltr" colspan="2"><br>-Valid login returns 200 OK<br>-HTTP-only cookie set: next-auth.session-token<br>-User redirected to /admin/dashboard<br>-Session data includes: id, email, name, role<br>-Invalid password returns 401 with &quot;Invalid email or password&quot;<br>-Non-existent email returns 401 (same message for security)<br>-Session persists across browser sessions<br>-Dashboard accessible without re-login<br>-Expired token redirects to login with &quot;Session expired&quot; message<br>-Password never included in response</td></tr><tr style="height: 291px"><th id="1898205363R48" style="height: 291px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 291px">49</div></th><td class="s25"></td><td class="s17" colspan="3">Middleware Validation</td><td class="s18" dir="ltr" colspan="4">Method 1: Protected Route Access<br>1. Logout (clear cookies)<br>2. GET /admin/dashboard without token<br>3. GET /api/bookings without token<br><br>Method 2: Valid Token Access<br>1. Login as ADMIN<br>2. GET /api/bookings with valid token<br>3. GET /admin/dashboard<br><br>Method 3: Expired Token<br>1. Manually set expired token in cookie<br>2. Attempt to access protected route<br><br>Method 4: Inactive Account<br>1. Super Admin sets user.isActive = false<br>2. User attempts to login<br>3. Previously logged-in user tries to access route</td><td class="s18" dir="ltr" colspan="2"><br>-No token → 302 redirect to /admin/login<br>-API without token → 401 &quot;Authentication required&quot;<br>-Valid token → 200 OK, data returned<br>-Dashboard loads successfully<br>-Expired token → 401 &quot;Session expired&quot;<br>-Redirect to login with error message<br>-Inactive account login → 403 &quot;Account deactivated&quot;<br>-Existing session cleared<br>-Message: &quot;Contact administrator&quot;<br>-Security headers added to all responses</td></tr><tr style="height: 545px"><th id="1898205363R49" style="height: 545px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 545px">50</div></th><td class="s25"></td><td class="s17" colspan="3">Role-Based Access Control (RBAC)</td><td class="s18" dir="ltr" colspan="4">Method 1: SUPER_ADMIN Access<br>1. Login as SUPER_ADMIN<br>2. Attempt all operations:<br>- Create/edit/delete users<br>- Delete client<br>- Access system settings<br>- View audit logs<br><br>Method 2: ADMIN Access<br>1. Login as ADMIN<br>2. Attempt operations:<br>- Create time slots <br>- Confirm payment <br>- Edit bookings <br>- Delete client<br>- Can&#39;t Create admin user <br><br>Method 3: MANAGER Access<br>1. Login as MANAGER<br>2. Attempt operations:<br>- View bookings <br>- Can&#39;t Create time slots <br>- Can&#39;t Edit booking <br>- View reports <br><br>Method 4: STAFF Access<br>1. Login as STAFF<br>2. Attempt operations:<br>- Mark booking completed <br>- View bookings <br>- Can&#39;t Delete booking <br>- Can&#39;t Create time slots </td><td class="s18" dir="ltr" colspan="2"><br><br>-SUPER_ADMIN can perform ALL operations<br>-All routes accessible<br>-No 403 errors<br><br>-ADMIN can create time slots and confirm payments<br>-Client delete returns 403 &quot;Super Admin privileges required&quot;<br>-User management returns 403<br>-Can edit bookings created by clients<br><br>-MANAGER can view all data<br>-Create time slots returns 403 &quot;Admin privileges required&quot;<br>-Edit booking returns 403<br>-Reports accessible<br><br>-STAFF can mark bookings as completed<br>-Can view booking details<br>-Delete returns 403 &quot;Required role: ADMIN&quot;<br>-Time slot creation returns 403<br><br>-UI hides unauthorized buttons<br>-Tooltips explain required role<br>-All failures logged to audit log</td></tr><tr style="height: 32px"><th id="1898205363R50" style="height: 32px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 32px">51</div></th><td class="s4"></td><td class="s5" colspan="9"></td></tr></tbody></table></div><div id='embed_813792342' class='waffle-embedded-object-overlay' style='width: 559px; height: 199px; display: block;'><img src='resources/image_1898205363_0.jpg' style='display: block; pointer-events: none;' height='199' width='559'></div><script>
  function posObj(sheet, id, row, col, x, y) {
      var rtl = false;
      var sheetElement = document.getElementById(sheet);
      if (!sheetElement) {
        sheetElement = document.getElementById(sheet + '-grid-container');
      }
      if (sheetElement) {
        rtl = sheetElement.getAttribute('dir') == 'rtl';
      }
      var r = document.getElementById(sheet+'R'+row);
      var c = document.getElementById(sheet+'C'+col);
      if (r && c) {
        var objElement = document.getElementById(id);
        var s = objElement.style;
        var t = y;
        while (r && r != sheetElement) {
          t += r.offsetTop;
          r = r.offsetParent;
      }
      var offsetX = x;
      while (c && c != sheetElement) {
        offsetX += c.offsetLeft;
        c = c.offsetParent;
      }
      if (rtl) {
        offsetX -= objElement.offsetWidth;
      }
      s.left = offsetX + 'px';
      s.top = t + 'px';
      s.display = 'block';
      s.border = '1px solid #000000';
    }
  }

  function posObjs() {
  posObj('1898205363', 'embed_813792342', 0, 3, 97, 2);}posObjs();</script>